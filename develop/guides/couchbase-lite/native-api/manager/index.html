<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head><title>Manager | Couchbase - Mobile Developers</title><link rel="stylesheet" type="text/css" href="../../../../../styles/style.css"></link><style class="language-stripe" id="language-stripe-objective-c" type="text/css">*.stripe-display.objective-c{display:inline;}*.stripe-active.objective-c{background:rgba(0, 0, 0, 0.05);}*.stripe-display.swift{display:none;}*.stripe-active.swift{background:transparent;}*.stripe-display.java{display:none;}*.stripe-active.java{background:transparent;}*.stripe-display.android{display:none;}*.stripe-active.android{background:transparent;}*.stripe-display.c{display:none;}*.stripe-active.c{background:transparent;}</style><style class="language-stripe" id="language-stripe-swift" type="text/css">*.stripe-display.objective-c{display:none;}*.stripe-active.objective-c{background:transparent;}*.stripe-display.swift{display:inline;}*.stripe-active.swift{background:rgba(0, 0, 0, 0.05);}*.stripe-display.java{display:none;}*.stripe-active.java{background:transparent;}*.stripe-display.android{display:none;}*.stripe-active.android{background:transparent;}*.stripe-display.c{display:none;}*.stripe-active.c{background:transparent;}</style><style class="language-stripe" id="language-stripe-java" type="text/css">*.stripe-display.objective-c{display:none;}*.stripe-active.objective-c{background:transparent;}*.stripe-display.swift{display:none;}*.stripe-active.swift{background:transparent;}*.stripe-display.java{display:inline;}*.stripe-active.java{background:rgba(0, 0, 0, 0.05);}*.stripe-display.android{display:none;}*.stripe-active.android{background:transparent;}*.stripe-display.c{display:none;}*.stripe-active.c{background:transparent;}</style><style class="language-stripe" id="language-stripe-android" type="text/css">*.stripe-display.objective-c{display:none;}*.stripe-active.objective-c{background:transparent;}*.stripe-display.swift{display:none;}*.stripe-active.swift{background:transparent;}*.stripe-display.java{display:none;}*.stripe-active.java{background:transparent;}*.stripe-display.android{display:inline;}*.stripe-active.android{background:rgba(0, 0, 0, 0.05);}*.stripe-display.c{display:none;}*.stripe-active.c{background:transparent;}</style><style class="language-stripe" id="language-stripe-c" type="text/css">*.stripe-display.objective-c{display:none;}*.stripe-active.objective-c{background:transparent;}*.stripe-display.swift{display:none;}*.stripe-active.swift{background:transparent;}*.stripe-display.java{display:none;}*.stripe-active.java{background:transparent;}*.stripe-display.android{display:none;}*.stripe-active.android{background:transparent;}*.stripe-display.c{display:inline;}*.stripe-active.c{background:rgba(0, 0, 0, 0.05);}</style><script type="text/javascript">var languages = ["objective-c","swift","java","android","c"];
                    
	                var cookies = document.cookie.split(';');
				    for(var i=0; i<cookies.length; i++) {
				        var cookie = cookies[i].trim();
				        
				        if (cookie.indexOf("language=")==0) {
				            var selectedLanguage = cookie.substring(9, cookie.length);
				            if (selectedLanguage.length > 0) {
				                document.write("<style class='language-stripe' type='text/css'>");
				                for (var j=0; j<languages.length; j++) {
				                    var language = languages[j];
				                    document.write("*.stripe-display." + language + "{display:" + (language == selectedLanguage ? "inline" : "none") + ";}");
                                    document.write("*.stripe-active." + language + "{background:" + (language == selectedLanguage ? "rgba(0, 0, 0, 0.05)" : "transparent") + ";}");
				                }
				                document.write("</style>");
				            }
				            break;
				        }
				    }
				    
			    </script><script type="text/javascript">
                var rootPath = "../../../../../";</script><script src="../../../../../scripts/core.js"></script><script src="../../../../../scripts/search-core.js"></script><script src="../../../../../scripts/search.js"></script><script src="../../../../../scripts/search-index.js"></script><script type="text/javascript">
	        
	        var _gaq = _gaq || [];
	        _gaq.push(['_setAccount', 'UA-7763794-1']);
	        _gaq.push(['_trackPageview']);
	        
	        (function() {
	            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	        })();
	        
	    </script></head><body onload="init()"><div class="page-header"><table class="navigator-bar"><tr><td><a class="dark logo" href="../../../../../index.html"><div>Couchbase</div><div>Mobile Developers</div></a></td><td><a class="dark" href="../../../../../get-started/get-started-mobile/index.html">Get Started</a></td><td><a class="dark active" href="../../../../../develop/training/build-first-ios-app/index.html">Develop</a></td><td><a class="dark" href="https://forums.couchbase.com/mobile">Forums</a></td><td width="100%"></td><td><input class="search" type="text" onkeyup="search_onkeyup(this)" onchange="search_onchange(this)" onfocus="search_onfocus(this)" onblur="search_onblur(this)"></input></td></tr></table><div class="search-results-wrapper"><div class="search-results-floater"><div id="search-results" class="hidden"></div></div></div><table class="navigator-bar secondary"><tr><td><a class="dark" href="../../../../../develop/training/build-first-ios-app/index.html">Training</a></td><td><a class="dark active" href="../../../../../develop/guides/modeling/index.html">Guides</a></td><td><a class="dark" href="../../../../../develop/references/couchbase-lite/index.html">API References</a></td><td><a class="dark" href="../../../../../develop/samples/samples/index.html">Samples</a></td><td><a class="dark" href="http://www.couchbase.com/nosql-databases/downloads#Couchbase_Mobile">Downloads</a></td><td width="100%"></td></tr></table></div><div class="header-spacer"></div><div class="page-wrapper"><nav><ul class="nav-list"><li class="nav-section"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/modeling/index.html">Data Modeling</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/modeling/basics/index.html">The Basics</a></li><li class="nav-item"><a href="../../../../../develop/guides/modeling/one-to-many/index.html">One-to-Many Relationships</a></li></ul></li><li class="nav-section expanded"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/couchbase-lite/index.html">Couchbase Lite</a></div><ul><li class="nav-subsection expanded"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/couchbase-lite/native-api/index.html">Native API</a></div><ul><li class="nav-item active"><a href="../../../../../develop/guides/couchbase-lite/native-api/manager/index.html">Manager</a></li><li class="nav-item"><a href="../../../../../develop/guides/couchbase-lite/native-api/database/index.html">Database</a></li><li class="nav-item"><a href="../../../../../develop/guides/couchbase-lite/native-api/document/index.html">Document</a></li><li class="nav-item"><a href="../../../../../develop/guides/couchbase-lite/native-api/revision/index.html">Revision</a></li><li class="nav-item"><a href="../../../../../develop/guides/couchbase-lite/native-api/attachment/index.html">Attachment</a></li><li class="nav-item"><a href="../../../../../develop/guides/couchbase-lite/native-api/view/index.html">View</a></li><li class="nav-item"><a href="../../../../../develop/guides/couchbase-lite/native-api/query/index.html">Query</a></li><li class="nav-item"><a href="../../../../../develop/guides/couchbase-lite/native-api/replication/index.html">Replication</a></li><li class="nav-item"><a href="../../../../../develop/guides/couchbase-lite/native-api/model/index.html">Model (iOS only)</a></li></ul></li></ul></li><li class="nav-section"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/index.html">Sync Gateway</a></div><ul><li class="nav-subsection"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/getting-started-with-sync-gateway/index.html">Running the Sync Gateway</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/getting-started-with-sync-gateway/installing-sync-gateway/index.html">Installing Sync Gateway</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/getting-started-with-sync-gateway/connecting-sync-gateway-to-couchbase-server/index.html">Connecting Sync Gateway to Couchbase Server</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/getting-started-with-sync-gateway/starting-sync-gateway/index.html">Starting Sync Gateway</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/getting-started-with-sync-gateway/stopping-sync-gateway/index.html">Stopping Sync Gateway</a></li></ul></li><li class="nav-subsection"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/administering-sync-gateway/index.html">Configuration and administration</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/administering-sync-gateway/command-line-tool/index.html">Configuration options</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/administering-sync-gateway/administering-the-rest-apis/index.html">Administering the REST APIs</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/administering-sync-gateway/authorizing-users/index.html">Authorizing Users</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/administering-sync-gateway/authenticating-users/index.html">Authenticating Users</a></li></ul></li><li class="nav-subsection"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/channels/index.html">Data routing with "channels"</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/channels/intro/index.html">Introduction to channels</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/channels/developing/index.html">Developing channels</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/channels/troubleshooting/index.html">Troubleshooting channels</a></li></ul></li><li class="nav-subsection"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/sync-function-api-guide/index.html">Sync Function API</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/sync-function-api-guide/intro/index.html">Introduction</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/sync-function-api-guide/validation/index.html">Validation and Authorization</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/sync-function-api-guide/routing/index.html">Routing</a></li></ul></li><li class="nav-subsection"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/wcbs/index.html">Working with web apps</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/wcbs/bucket-shadowing/index.html">Pre-existing data and "bucket shadowing"</a></li></ul></li><li class="nav-subsection"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/changes-worker/index.html">Connecting additional backend processes</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/changes-worker/pattern/index.html">Changes Worker Pattern</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/changes-worker/example-workflow/index.html">Example Document Workflow</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/changes-worker/push/index.html">Push Notification Code</a></li></ul></li><li class="nav-subsection"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/deployment/index.html">Deployment considerations</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/deployment/during-development/index.html">During Development</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/deployment/in-production/index.html">In Production</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/deployment/troubleshooting/index.html">Troubleshooting and Fine-Tuning</a></li></ul></li><li class="nav-subsection"><div onclick="toggleExpanded(this.parentNode)" class="header"><a href="../../../../../develop/guides/sync-gateway/nginx/index.html">Deploying Sync Gateway behind a reverse proxy</a></div><ul><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/nginx/introduction-to-reverse-proxies/index.html">Introduction to reverse proxies</a></li><li class="nav-item"><a href="../../../../../develop/guides/sync-gateway/nginx/configuring-nginx-for-sync-gateway/index.html">Deploying and configuring nginx</a></li></ul></li></ul></li></ul></nav><article class="content-wrapper"><h1>Manager</h1><div class="toc"><h2>In this document</h2><ul class="plain"><li><a href="#creating-a-manager">Creating a manager</a><ul><li><a href="#location">Dude, where's my database file?</a></li></ul></li><li><a href="#manager-options">Manager options</a></li><li><a href="#Global logging settings">Global logging settings</a></li><li><a href="#manager-concurrency-support">Concurrency Support</a><ul><li><a href="#backgroundTell">Running individual blocks in the background</a></li><li><a href="#backgroundThreads">Running Couchbase Lite on a background thread</a></li></ul></li></ul></div><p>A <code>Manager</code> is the top-level object that manages a collection of Couchbase Lite <code>Database</code> instances. 
           You need to create a <code>Manager</code> instance before you can work with Couchbase Lite objects in your Application.
      </p><h2 id="creating-a-manager">Creating a manager</h2><hr></hr>
            <p>
                You create a <code>Manager</code> object by calling a constructor or initializer on the Manager class. In Objective-C you can also call <code>[CBLManager sharedInstance]</code> which returns a global instance; this instance should only be used on the main thread, however.
            </p>
            <div class="tab-bar"><a href="javascript:setLanguage(&#34;objective-c&#34;)" class="tab stripe-active objective-c">Objective-C</a><a href="javascript:setLanguage(&#34;swift&#34;)" class="tab stripe-active swift">Swift</a><a href="javascript:setLanguage(&#34;java&#34;)" class="tab stripe-active java">Java</a><a href="javascript:setLanguage(&#34;android&#34;)" class="tab stripe-active android">Android</a><a href="javascript:setLanguage(&#34;c&#34;)" class="tab stripe-active c">C#</a></div><span class="stripe-display objective-c"><pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    /*
     * In Objective-C the &lt;code&gt;Manager&lt;/code&gt; shared instance and all the objects descending
     * from it may only be used on the main thread.
     */                      
    CBLManager *manager = [CBLManager sharedInstance];
    if (!manager) {
        NSLog(@"Cannot create Manager instance");
        exit(-1);
    }
    return YES;
}
</code></pre></span><span class="stripe-display swift"><pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: NSDictionary?) -&gt; Bool {
  /*
   * In Swift the &lt;code&gt;Manager&lt;/code&gt; shared instance and all the objects descending
   * from it may only be used on the main thread.
   */
  let manager = CBLManager.sharedInstance()
  if manager == nil {
    NSLog("Cannot create Manager Instance")
    exit(-1)
  }
}
</code></pre></span><span class="stripe-display java"><pre><code>public class Application extends android.app.Application {
    private Manager manager;
    private static Context mContext;
    
    ...
    
    @Override
    public void onCreate() {
        super.onCreate();
        mContext = getApplicationContext();
        try {
            /*
             * In Java the Manager instance and all the objects descending
             * from it may be used on any thread.
             */
            manager = new Manager(new JavaContext("data"), Manager.DEFAULT_OPTIONS);
        } catch (IOException e) {
            Log.e(TAG, "Cannot create Manager instance", e);
            return;
        }
    }
}
</code></pre></span><span class="stripe-display android"><pre><code>public class Application extends android.app.Application {
    private Manager manager;
    private static Context mContext;
    
    ...
    
    @Override
    public void onCreate() {
        super.onCreate();
        mContext = getApplicationContext();
        try {
            /*
             * In Java the Manager instance and all the objects descending
             * from it may be used on any thread.
             */
            manager = new Manager(new AndroidContext(mContext), Manager.DEFAULT_OPTIONS);
        } catch (IOException e) {
            Log.e(TAG, "Cannot create Manager instance", e);
            return;
        }
    }
}
</code></pre></span><span class="stripe-display c"><pre><code>var manager = Manager.SharedInstance;
Debug.Assert(manager != null);
</code></pre></span>
            
            <h3 id="location">Dude, where's my database file?</h3><p>The Manager creates a directory in the filesystem and stores databases inside it. Normally, you don't need to care where that is -- your application shouldn't be directly accessing those files. But sometimes it does matter.</p><ul><li>Android: The directory is the location returned by the Android Context object's <code>getFilesDir()</code>.</li><li>iOS: <code>Application Support/CouchbaseLite/</code></li><li>Mac OS: <code>~/Library/Application Support/</code>com.example.YourAppBundleID<code>/CouchbaseLite/</code></li></ul><div class="note caution"><span class="tag">Caution:</span>One notable case where the location can be important is on iOS: Apple's app review process tries to make sure that the only application data that will be backed up to iCloud is data created by the user. So it's a red flag when, on first launch, an app creates data in backed-up locations (including the Documents and Application Support directories) without user action. Unfortunately, that will happen if your app starts a pull replication on launch, or installs a pre-populated database. Some apps using Couchbase Lite have had their App Store approval held up for this reason!</div><p>On iOS or Mac OS you can change the location of the databases by instantiating the Manager via a constructor/initializer that takes a path as a parameter. This directory will be created if it doesn't already exist. (Of course you should be consistent about what path to use, since if you change the path the application won't be able to find any already-existing databases.)</p><p>On Android, you can subclass <code>com.couchbase.lite.Context</code> and override its <code>getFilesDir</code> method to return the desired directory.</p><div class="tab-bar"><a href="javascript:setLanguage(&#34;objective-c&#34;)" class="tab stripe-active objective-c">Objective-C</a><a href="javascript:setLanguage(&#34;swift&#34;)" class="tab stripe-active swift">Swift</a><a href="javascript:setLanguage(&#34;java&#34;)" class="tab stripe-active java disabled">Java</a><a href="javascript:setLanguage(&#34;android&#34;)" class="tab stripe-active android disabled">Android</a><a href="javascript:setLanguage(&#34;c&#34;)" class="tab stripe-active c">C#</a></div><span class="stripe-display objective-c"><pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSString* dir = WhereIWantCBLStuffToGo();
    NSError* error;
    self.manager = [[CBLManager alloc] initWithDirectory: dir
                                                 options: NULL
                                                   error: &amp;error];
    if (!manager) {
        NSLog(@"Cannot create Manager instance: %@", error);
        exit(-1);
    }
    return YES;
}
</code></pre></span><span class="stripe-display swift"><pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: NSDictionary?) -&gt; Bool {
  let dir = WhereIWantCBLStuffToGo()
  var error: NSError?
  self.manager = CBLManager(directory: dir, options: nil, error: &amp;error)
  if manager == nil {
    NSLog("Cannot create Manager instance: %@", (error ?? ""))
    exit(-1)
  }
}
</code></pre></span><span class="stripe-display java"><pre><code class="disabled">No code example is currently available.</code></pre></span><span class="stripe-display android"><pre><code class="disabled">No code example is currently available.</code></pre></span><span class="stripe-display c"><pre><code>var dirInfo = Directory.CreateDirectory(dbPath);
Manager manager;
try 
{
    manager = new Manager(dirInfo, Manager.DefaultOptions);
} 
catch (DirectoryNotFoundException e) 
{
    Log.E(Tag, "Cannot create Manager instance", e);
}
</code></pre></span>
         <h2 id="manager-options">Manager options</h2><hr></hr>
             <p>By default a <code>Manager</code> will open a <code>Database</code> with read/write access. 
                 If you want to ensure that data can not be modified you can restrict <code>Database</code> access to read only by passing a <code>ManagerOptions</code> object to the <code>Manager</code> constructor or initilaizer.
            </p>
            <div class="tab-bar"><a href="javascript:setLanguage(&#34;objective-c&#34;)" class="tab stripe-active objective-c">Objective-C</a><a href="javascript:setLanguage(&#34;swift&#34;)" class="tab stripe-active swift">Swift</a><a href="javascript:setLanguage(&#34;java&#34;)" class="tab stripe-active java">Java</a><a href="javascript:setLanguage(&#34;android&#34;)" class="tab stripe-active android">Android</a><a href="javascript:setLanguage(&#34;c&#34;)" class="tab stripe-active c">C#</a></div><span class="stripe-display objective-c"><pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSError* error;
    CBLManagerOptions options;
    options.readOnly = YES;
    CBLManager *manager = [[CBLManager alloc] initWithDirectory: CBLManager.defaultDirectory options: &amp;options error: &amp;error ];
    if (error) {
        NSLog(@"Cannot create Manager instance with custom options");
        exit(-1);
    }
    return YES;
}
</code></pre></span><span class="stripe-display swift"><pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: NSDictionary?) -&gt; Bool {
  var error: NSError?
  let options = CBLManagerOptions(readOnly: true, fileProtection: nil)
  self.manager = CBLManager(directory: CBLManager.defaultDirectory(), options: nil, error: &amp;error)
  if error != nil {
    NSLog("Cannot create Manager instance: %@", error!) 
    exit(-1)
  }
  return true
}
</code></pre></span><span class="stripe-display java"><pre><code>public class Application extends android.app.Application {
    private Manager manager;
    private static Context mContext;
    
    ...
    
    @Override
    public void onCreate() {
        super.onCreate();
        mContext = getApplicationContext();
        try {
            ManagerOptions customOptions = new ManagerOptions();
            customOptions.setReadOnly(true);
            manager = new Manager(new AndroidContext(mContext), customOptions);
        } catch (IOException e) {
            Log.e(TAG, "Cannot create Manager instance with custom options", e);
            return;
        }
    }
}
</code></pre></span><span class="stripe-display android"><pre><code>public class Application extends android.app.Application {
    private Manager manager;
    private static Context mContext;
    
    ...
    
    @Override
    public void onCreate() {
        super.onCreate();
        mContext = getApplicationContext();
        try {
            ManagerOptions customOptions = new ManagerOptions();
            customOptions.setReadOnly(true);
            manager = new Manager(new AndroidContext(mContext), customOptions);
        } catch (IOException e) {
            Log.e(TAG, "Cannot create Manager instance with custom options", e);
            return;
        }
    }
}
</code></pre></span><span class="stripe-display c"><pre><code>var options = new ManagerOptions();
options.ReadOnly = true;
Manager manager;
try 
{
    manager = new Manager(Directory.CreateDirectory(dbPath), options);
} 
catch (DirectoryNotFoundException e) 
{
    Log.E(Tag, "Cannot create Manager instance", e);
}
</code></pre></span>
         <h2 id="Global logging settings">Global logging settings</h2><hr></hr>
               <p>
                   You can customize the global logging settings for Couchbase Lite via the <code>Mananger</code> class.
               </p>
               <p>
                   Log messages are tagged, allowing them to be logically grouped by activity. 
                   You can control whether individual tag groups are logged, 
                   in Java it is also possible to set log levels for each tag group.
               </p>
               <p>
                   In Objective-C tag groups is disabled by default, in Java tag groups are enabled at level WARN by default.
                   
                   The available tags are:
               </p>
               <div class="tab-bar"><a href="javascript:setLanguage(&#34;objective-c&#34;)" class="tab stripe-active objective-c">Objective-C</a><a href="javascript:setLanguage(&#34;swift&#34;)" class="tab stripe-active swift">Swift</a><a href="javascript:setLanguage(&#34;java&#34;)" class="tab stripe-active java">Java</a><a href="javascript:setLanguage(&#34;android&#34;)" class="tab stripe-active android">Android</a><a href="javascript:setLanguage(&#34;c&#34;)" class="tab stripe-active c disabled">C#</a></div><span class="stripe-display objective-c"><pre><code>BLIP
BLIPVerbose
CBLDatabase
CBLJSONMatcher
CBLListener
CBLListenerVerbose
CBLModel
CBL_Router
CBL_Server
CBL_URLProtocol
CBLValidation
CBLRemoteRequest
CBLMultiStreamWriter
ChangeTracker
ChangeTrackerVerbose
JSONSchema
MYDynamicObject
Query
RemoteRequest
Sync
SyncVerbose
View
ViewVerbose
WS
</code></pre></span><span class="stripe-display swift"><pre><code>BLIP
BLIPVerbose
CBLDatabase
CBLJSONMatcher
CBLListener
CBLListenerVerbose
CBLModel
CBL_Router
CBL_Server
CBL_URLProtocol
CBLValidation
CBLRemoteRequest
CBLMultiStreamWriter
ChangeTracker
ChangeTrackerVerbose
JSONSchema
MYDynamicObject
Query
RemoteRequest
Sync
SyncVerbose
View
ViewVerbose
WS
</code></pre></span><span class="stripe-display java"><pre><code>BlobStore
CBLite // default "catch-all" tag
ChangeTracker
Database
Listener
MultistreamWriter
Query
RemoteRequest
Router
Sync
View
   
</code></pre></span><span class="stripe-display android"><pre><code>BlobStore
CBLite // default "catch-all" tag
ChangeTracker
Database
Listener
MultistreamWriter
Query
RemoteRequest
Router
Sync
View
   
</code></pre></span><span class="stripe-display c"><pre><code class="disabled">No code example is currently available.</code></pre></span>
               <p>
                   You would enable the "Sync" tag group by calling the <code>enableLogging</code> method on the <code>Manager</code>class. 
                   In Java you may also set the logging level.
               </p>
               <div class="tab-bar"><a href="javascript:setLanguage(&#34;objective-c&#34;)" class="tab stripe-active objective-c">Objective-C</a><a href="javascript:setLanguage(&#34;swift&#34;)" class="tab stripe-active swift">Swift</a><a href="javascript:setLanguage(&#34;java&#34;)" class="tab stripe-active java">Java</a><a href="javascript:setLanguage(&#34;android&#34;)" class="tab stripe-active android">Android</a><a href="javascript:setLanguage(&#34;c&#34;)" class="tab stripe-active c disabled">C#</a></div><span class="stripe-display objective-c"><pre><code>- (BOOL)application: (UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions {
CBLManager enableLogging: @"Sync"];
return YES;
</code></pre></span><span class="stripe-display swift"><pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: NSDictionary?) -&gt; Bool {
  CBLManager.enableLogging("Sync")
  return true
}
</code></pre></span><span class="stripe-display java"><pre><code>public class Application extends android.app.Application {
    ...
    @Override
    public void onCreate() {
        super.onCreate();
        ...
        Manager.enableLogging("Sync", Log.VERBOSE);
        ...
    }
}
 
</code></pre></span><span class="stripe-display android"><pre><code>public class Application extends android.app.Application {
    ...
    @Override
    public void onCreate() {
        super.onCreate();
        ...
        Manager.enableLogging("Sync", Log.VERBOSE);
        ...
    }
}
 
</code></pre></span><span class="stripe-display c"><pre><code class="disabled">No code example is currently available.</code></pre></span>
               <p>In Java the <code>Log</code> class provides static constants for the default tag groups:</p>
               <ul><li>Log.TAG_BLOB_STORE //BlobStore</li><li>Log.TAG //CBLite</li><li>Log.TAG_CHANGE_TRACKER //ChangeTracker</li><li>Log.TAG_DATABASE //Database</li><li>Log.TAG_LISTENER //Listener</li><li>Log.TAG_MULTI_STREAM_WRITER //MultistreamWriter</li><li>Log.TAG_QUERY //Query</li><li>Log.TAG_REMOTE_REQUEST //RemoteRequest</li><li>Log.TAG_ROUTER //Router</li><li>Log.TAG_SYNC //Sync</li><li>Log.TAG_VIEW //View</li></ul>
               <p>and static constants for the supported logging levels:</p>
               <ul><li>Log.VERBOSE</li><li>Log.DEBUG</li><li>Log.INFO</li><li>Log.WARN</li><li>Log.ERROR</li></ul>
            <h2 id="manager-concurrency-support">Concurrency Support</h2><hr></hr>
               <div class="note"><span class="tag">Note:</span>In Java all Couchbase Lite objects may be shared freely
                   between threads. The rest of this section is irrelevant for Java programs, and applies only to Objective-C.</div>
               <p>In Objective-C, a <code>Manager</code> instance and the object graph associated with it
                   may only be accessed from the thread or dispatch queue that created the <code>Manager</code> instance. Concurrency is supported through explicit method calls. 
               </p>
               
               <h3 id="backgroundTell">Running individual blocks in the background</h3><p>
                       You can use the <code>CBLManager</code> method <code>backgroundTellDatabaseNamed:to:</code> to perform any operation in the background. 
                       Be careful with this, though! Couchbase Lite objects are per-thread, and your block runs on a background thread, so:
                   </p><ul><li>
                           You can’t use any of the Couchbase Lite objects (databases, documents, models…) you were 
                           using on the main thread. Instead, you have to use the CBLDatabase object 
                           passed to the block, and the other objects reachable from it.
                       </li><li>
                           You can’t save any of the Couchbase Lite objects in the block and then call them on the 
                           main thread. (For example, if in the block you allocated some CBLModels and 
                           assigned them to properties of application objects, bad stuff would happen 
                           if they got called later on by application code.)
                       </li><li>
                           And of course, since the block is called on a background thread, any application 
                           or system APIs you call from it need to be thread-safe.
                       </li></ul><p>
                       In general, it’s best to do only very limited things using this API, otherwise 
                       it becomes too easy to accidentally use main-thread Couchbase Lite objects in the block, or 
                       store background-thread Couchbase Lite objects in places where they’ll be called on the main thread.
                   </p><p>
                       Here’s an example that deletes a number of documents given an array of IDs:
                   </p><div class="tab-bar"><a href="javascript:setLanguage(&#34;objective-c&#34;)" class="tab stripe-active objective-c">Objective-C</a><a href="javascript:setLanguage(&#34;swift&#34;)" class="tab stripe-active swift">Swift</a><a href="javascript:setLanguage(&#34;java&#34;)" class="tab stripe-active java disabled">Java</a><a href="javascript:setLanguage(&#34;android&#34;)" class="tab stripe-active android disabled">Android</a><a href="javascript:setLanguage(&#34;c&#34;)" class="tab stripe-active c disabled">C#</a></div><span class="stripe-display objective-c"><pre><code>// "myDB" is the CBLDatabase object in use on the main thread.
CBLManager* mgr = myDB.manager;
NSString* name = myDB.name;
[mgr backgroundTellDatabaseNamed: name to: ^(CBLDatabase *bgdb) {
    // Inside this block we can't use myDB; instead use the instance given (bgdb)
    for (NSString* docID in docIDs) {
        [[bgdb documentWithID: docID] deleteDocument: nil];
}];
</code></pre></span><span class="stripe-display swift"><pre><code>// "myDB" is the CBLDatabase object in use on the main thread.
let mgr = myDB.manager
let name = myDB.name
mgr.backgroundTellDatabaseNamed(name, to: { (bgdb: CBLDatabase!) -&gt; Void in
  // Inside this block we can't use myDB; instead use the instance given (bgdb)
  for docID in docIDs {
    bgdb.documentWithID(docID).deleteDocument(nil)
  }
})
</code></pre></span><span class="stripe-display java"><pre><code class="disabled">No code example is currently available.</code></pre></span><span class="stripe-display android"><pre><code class="disabled">No code example is currently available.</code></pre></span><span class="stripe-display c"><pre><code class="disabled">No code example is currently available.</code></pre></span>

           <h3 id="backgroundThreads">Running Couchbase Lite on a background thread</h3><p>
                           If you want to do lots of Couchbase Lite processing in the background in Objective-C,
                           the best way to do it is to start your own background thread and use a new <code>Manager</code> instance on it.
                       </p><div class="tab-bar"><a href="javascript:setLanguage(&#34;objective-c&#34;)" class="tab stripe-active objective-c">Objective-C</a><a href="javascript:setLanguage(&#34;swift&#34;)" class="tab stripe-active swift">Swift</a><a href="javascript:setLanguage(&#34;java&#34;)" class="tab stripe-active java disabled">Java</a><a href="javascript:setLanguage(&#34;android&#34;)" class="tab stripe-active android disabled">Android</a><a href="javascript:setLanguage(&#34;c&#34;)" class="tab stripe-active c disabled">C#</a></div><span class="stripe-display objective-c"><pre><code>- (BOOL)application:(UIApplication *)application
        didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CBLManager *manager = [CBLManager sharedInstance];
    NSError* error;
    self.database = [manager databaseNamed: @"db" error: &amp;error];
    
    // We also want to run some Couchbase Lite operations on a background thread.
    // Since we can't use the regular CBLManager instance there, we copy it
    // and pass the copy to the background thread to use:
    CBLManager* bgMgr = [manager copy];
    [NSThread detachNewThreadSelector: @selector(runBackground:)
                             toTarget: self 
                           withObject: bgMgr];
    return YES;
}
- (void) runBackground: (CBLManager*)bgMgr {
    NSError* error;
    CBLDatabase* bgDB = [bgMgr databaseNamed: @"db" error: &amp;error];
    // ... now use bgDB
}
</code></pre></span><span class="stripe-display swift"><pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: NSDictionary?) -&gt; Bool {
  let manager = CBLManager.sharedInstance()
  var error: NSError?
  let database = manager.databaseNamed("db", error: &amp;error)
  let bgMgr = manager.copy()
  NSThread.detachNewThreadSelector("runBackground:", toTarget: self, withObject: bgMgr)
  return true
}
func runBackground(bgMgr: CBLManager) {
  var error: NSError?
  let bgDB = [bgMgr.databaseNamed("db", error: &amp;error)]
}
</code></pre></span><span class="stripe-display java"><pre><code class="disabled">No code example is currently available.</code></pre></span><span class="stripe-display android"><pre><code class="disabled">No code example is currently available.</code></pre></span><span class="stripe-display c"><pre><code class="disabled">No code example is currently available.</code></pre></span><p>If you don't plan to use Couchbase Lite on the main thread at all,
                          the setup is even easier. Just have the background thread create a new
                          instance of CBLManager from scratch and use that:</p><div class="tab-bar"><a href="javascript:setLanguage(&#34;objective-c&#34;)" class="tab stripe-active objective-c">Objective-C</a><a href="javascript:setLanguage(&#34;swift&#34;)" class="tab stripe-active swift">Swift</a><a href="javascript:setLanguage(&#34;java&#34;)" class="tab stripe-active java disabled">Java</a><a href="javascript:setLanguage(&#34;android&#34;)" class="tab stripe-active android disabled">Android</a><a href="javascript:setLanguage(&#34;c&#34;)" class="tab stripe-active c disabled">C#</a></div><span class="stripe-display objective-c"><pre><code>- (BOOL)application:(UIApplication *)application
        didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // We're not going to use Couchbase Lite at all on the main thread;
    // instead we start a background thread to run it on:
    [NSThread detachNewThreadSelector: @selector(runBackground)
                             toTarget: self 
                           withObject: nil];
    return YES;
}
- (void) runBackground {
    // Create a CBLManager instance to use on this background thread:
    CBLManager* manager = [[CBLManager alloc] init];
    NSError* error;
    CBLDatabase* db = [manager databaseNamed: @"db" error: &amp;error];
    // ... now use the database
}
</code></pre></span><span class="stripe-display swift"><pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: NSDictionary?) -&gt; Bool {
  // We're not going to use Couchbase Lite at all on the main thread;
  // instead we start a background thread to run it on:
  NSThread.detachNewThreadSelector("runBackground", toTarget: self, withObject: nil)
  return true
}
func runBackground {
  let manager = CBLManager.sharedInstance()
  var error: NSError?
  let db = [bgMgr.databaseNamed("db", error: &amp;error)]
  // ... now use the database 
}
</code></pre></span><span class="stripe-display java"><pre><code class="disabled">No code example is currently available.</code></pre></span><span class="stripe-display android"><pre><code class="disabled">No code example is currently available.</code></pre></span><span class="stripe-display c"><pre><code class="disabled">No code example is currently available.</code></pre></span>
           </article><div class="page-footer"><span>Copyright © 2014 Couchbase Inc.  All rights reserved.</span><a href="http://www.couchbase.com/terms-of-service">Terms of Use</a><a href="http://www.couchbase.com/privacy">Privacy Policy</a></div></div></body></html>